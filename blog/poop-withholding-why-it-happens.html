<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VV8TGNN2S1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-VV8TGNN2S1');
  </script>
  <meta charset="UTF-8" />
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>
  <!-- SEO Meta Tags -->
  <title>Poop Withholding: Why It Happens and How to Break the Cycle | Potty Pal AI</title>
  <meta name="description" content="Toddler refusing to poop on the potty? Learn why poop withholding happens, how it creates a painful cycle, and proven strategies to help your child." />
  <meta name="keywords" content="poop withholding, toddler won't poop, stool withholding, potty training constipation, toddler constipation" />
  
  <!-- Open Graph Tags -->
  <meta property="og:title" content="Poop Withholding: Why It Happens and How to Break the Cycle | Potty Pal AI" />
  <meta property="og:description" content="Toddler refusing to poop on the potty? Learn why poop withholding happens, how it creates a painful cycle, and proven strategies to help your child." />
  <meta property="og:image" content="https://pottypalai.com/images/blog/poop-withholding.png" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://pottypalai.com/blog/poop-withholding" />
  <meta property="og:site_name" content="Potty Pal AI" />
  
  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Poop Withholding: Why It Happens and How to Break the Cycle | Potty Pal AI" />
  <meta name="twitter:description" content="Toddler refusing to poop on the potty? Learn why poop withholding happens, how it creates a painful cycle, and proven strategies to help your child." />
  <meta name="twitter:image" content="https://pottypalai.com/images/blog/poop-withholding.png" />
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://pottypalai.com/blog/poop-withholding" />
  
  <!-- Article Schema JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Poop Withholding: Why It Happens and How to Break the Cycle",
    "description": "Toddler refusing to poop on the potty? Learn why poop withholding happens, how it creates a painful cycle, and proven strategies to help your child.",
    "image": "https://pottypalai.com/images/blog/poop-withholding.png",
    "datePublished": "2025-11-05T00:00:00+00:00",
    "dateModified": "2025-11-05T00:00:00+00:00",
    "author": {
      "@type": "Organization",
      "name": "Potty Pal AI"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Potty Pal AI",
      "logo": {
        "@type": "ImageObject",
        "url": "https://pottypalai.com/images/pottypallogolargetransparent.png"
      }
    },
    "articleSection": "Common Problems",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://pottypalai.com/blog/poop-withholding"
    }
  }
  </script>
  
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&family=Fredoka:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --accent: #4ECDC4;
      --accent2: #1A535C;
      --bg: #fff;
      --text: #222;
      --radius: 18px;
      --space: 40px;
      --font-display: 'Fredoka', 'Quicksand', 'Arial Rounded MT Bold', Arial, sans-serif;
      --font-body: 'Quicksand', Arial, sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; }
    html { scroll-behavior: smooth; overflow-x: hidden; width: 100%; }
    body {
      margin: 0;
      font-family: var(--font-body);
      background: var(--bg);
      color: var(--text);
      font-size: 1.08rem;
      line-height: 1.7;
      overflow-x: hidden;
      width: 100%;
    }
    .container {
      width: 100%;
      max-width: 920px;
      margin-inline: auto;
      padding: 2rem 1rem 4rem;
    }
    @media (max-width: 768px) {
      .container { padding-left: 20px; padding-right: 20px; }
    }
    
    /* Breadcrumb */
    .breadcrumb {
      margin: 1rem 0 1.5rem;
      font-size: 0.95rem;
      color: #55656d;
    }
    .breadcrumb a {
      color: var(--accent2);
      text-decoration: none;
      border-bottom: 1px dashed rgba(26,83,92,0.45);
    }
    .breadcrumb a:hover {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }
    .breadcrumb span {
      margin: 0 0.5rem;
    }
    
    /* Article Header */
    .article-header {
      margin-bottom: 2rem;
    }
    .article-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 1rem;
      font-size: 0.95rem;
      color: #55656d;
    }
    .article-category {
      padding: 0.4rem 0.9rem;
      background: #eafaf8;
      color: var(--accent2);
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 700;
      text-decoration: none;
      border: 1px solid #d6f5ef;
      display: inline-block;
    }
    .article-category:hover {
      background: var(--accent);
      color: #fff;
      border-color: var(--accent);
    }
    .article-date {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .article-header h1 {
      font-family: var(--font-display);
      color: var(--accent2);
      font-size: 2.5rem;
      line-height: 1.1;
      margin: 0.5rem 0 1rem;
      letter-spacing: -0.5px;
    }
    
    /* Featured Image */
    .featured-image {
      width: 100%;
      aspect-ratio: 16/9;
      object-fit: cover;
      border-radius: var(--radius);
      margin: 2rem 0;
      box-shadow: 0 4px 20px rgba(78,205,196,0.12);
    }
    
    /* Article Content */
    .article-content {
      font-size: 1.1rem;
      line-height: 1.8;
      color: #35434b;
    }
    .article-content h2 {
      font-family: var(--font-display);
      color: var(--accent2);
      font-size: 1.8rem;
      margin: 2rem 0 1rem;
      line-height: 1.3;
    }
    .article-content h3 {
      font-family: var(--font-display);
      color: var(--accent2);
      font-size: 1.4rem;
      margin: 1.5rem 0 0.8rem;
      line-height: 1.3;
    }
    .article-content p {
      margin: 1rem 0;
    }
    .article-content ul,
    .article-content ol {
      margin: 1rem 0 1rem 1.5rem;
      padding: 0;
    }
    .article-content li {
      margin: 0.5rem 0;
    }
    .article-content img {
      max-width: 100%;
      height: auto;
      border-radius: var(--radius);
      margin: 1.5rem 0;
      box-shadow: 0 2px 12px rgba(78,205,196,0.08);
    }
    .article-content a {
      color: var(--accent2);
      text-decoration: underline;
    }
    .article-content a:hover {
      color: var(--accent);
    }
    .article-content strong {
      color: #24323a;
      font-weight: 700;
    }
    
    /* Pro Tip */
    .pro-tip {
      background: #fafdff;
      border-left: 4px solid var(--accent);
      padding: 1.2rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 8px;
    }
    
    /* CTA Section */
    .cta-section {
      background: #fafdff;
      border: 2px solid var(--accent);
      border-radius: var(--radius);
      padding: 2rem;
      margin: 3rem 0;
      text-align: center;
    }
    .cta-section h3 {
      font-family: var(--font-display);
      color: var(--accent2);
      font-size: 1.5rem;
      margin: 0 0 1rem;
    }
    .cta-section p {
      color: #485560;
      margin: 0 0 1.5rem;
    }
    .cta-btn {
      font-family: var(--font-display);
      background: linear-gradient(90deg, #4ecdc4 65%, #1a535c 110%);
      color: #fff;
      font-size: 1.03rem;
      font-weight: 700;
      border: none;
      border-radius: var(--radius);
      padding: 0.90em 2.2em;
      letter-spacing: 0.02em;
      cursor: pointer;
      box-shadow: 0 1px 8px #4ECDC420;
      transition: background 0.16s, transform 0.18s;
      outline: none;
      text-decoration: none;
      display: inline-block;
    }
    .cta-btn:hover {
      background: linear-gradient(86deg, #1a535c 55%, #4ecdc4 140%);
      transform: scale(1.05) translateY(-3px);
    }
    
    /* Key Takeaways */
    .key-takeaways {
      background: #fafdff;
      border-radius: var(--radius);
      padding: 2rem;
      margin: 2rem 0;
    }
    .key-takeaways h2 {
      font-family: var(--font-display);
      color: var(--accent2);
      font-size: 1.8rem;
      margin: 0 0 1rem;
    }
    .key-takeaways ul {
      margin: 0;
      padding-left: 1.5rem;
    }
    
    /* Related Posts */
    .related-posts {
      margin-top: 4rem;
      padding-top: 3rem;
      border-top: 2px solid #eafaf8;
    }
    .related-posts h2 {
      font-family: var(--font-display);
      color: var(--accent2);
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
    }
    .related-posts-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }
    @media (max-width: 900px) {
      .related-posts-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 600px) {
      .related-posts-grid {
        grid-template-columns: 1fr;
      }
    }
    .related-post-card {
      background: #fafdff;
      border-radius: var(--radius);
      box-shadow: 0 1px 10px rgba(78,205,196,0.08);
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .related-post-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 28px rgba(78,205,196,0.14);
    }
    .related-post-image {
      width: 100%;
      aspect-ratio: 16/9;
      object-fit: cover;
      display: block;
      background: #eafaf8;
    }
    .related-post-content {
      padding: 1.2rem;
    }
    .related-post-card h3 {
      font-family: var(--font-display);
      color: var(--accent2);
      font-size: 1.1rem;
      margin: 0 0 0.5rem;
      line-height: 1.3;
    }
    .related-post-date {
      font-size: 0.85rem;
      color: #65757d;
    }
    
    /* Footer */
    footer {
      background: #f6fafa;
      color: #3c4d58;
      font-size: 1.03rem;
      padding: 2.5rem 0 1.1rem 0;
      margin-top: var(--space);
      border-radius: var(--radius) var(--radius) 0 0;
      text-align: center;
      box-shadow: 0 -1px 10px #4ECDC40a;
    }
    .footer-links {
      margin: 1em 0 0.7em 0;
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    .footer-links a {
      color: var(--accent2);
      text-decoration: underline;
      font-weight: 700;
      font-size: 1.02em;
      transition: color 0.17s;
    }
    .footer-links a:hover {
      color: var(--accent);
      background: #eafaf8;
      text-decoration: none;
    }
    .footer-legal {
      margin: 0.5em 0 0.6em 0;
      font-size: 0.95em;
      color: #657d85;
      opacity: 0.9;
    }
    .footer-disclaimer {
      font-size: 0.98em;
      color: #bb0000;
      margin-top: 0.6em;
      font-style: italic;
      opacity: 0.95;
    }
    
    /* Hamburger Menu */
    .hamburger-menu {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 4px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 12px rgba(78, 205, 196, 0.15);
      transition: all 0.3s ease;
    }
    .hamburger-menu:hover {
      background: rgba(255, 255, 255, 1);
      box-shadow: 0 4px 20px rgba(78, 205, 196, 0.25);
    }
    .hamburger-line {
      width: 24px;
      height: 3px;
      background: var(--accent2);
      border-radius: 2px;
      transition: all 0.3s ease;
    }
    .hamburger-menu.active .hamburger-line:nth-child(1) {
      transform: rotate(45deg) translate(6px, 6px);
    }
    .hamburger-menu.active .hamburger-line:nth-child(2) {
      opacity: 0;
    }
    .hamburger-menu.active .hamburger-line:nth-child(3) {
      transform: rotate(-45deg) translate(6px, -6px);
    }
    .mobile-menu {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      z-index: 999;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .mobile-menu.active {
      opacity: 1;
      visibility: visible;
    }
    .mobile-menu a {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent2);
      text-decoration: none;
      padding: 1rem 2rem;
      border-radius: 12px;
      transition: all 0.3s ease;
      text-align: center;
      min-width: 200px;
    }
    .mobile-menu a:hover {
      background: var(--accent);
      color: white;
      transform: scale(1.05);
    }
    .mobile-menu .menu-section {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
    }
    .mobile-menu .menu-divider {
      width: 2px;
      height: 40px;
      background: var(--accent);
      margin: 1rem 0;
    }
    .mobile-menu .menu-title {
      font-family: var(--font-display);
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 0.5rem;
    }
    @media (min-width: 769px) {
      .hamburger-menu {
        display: none;
      }
    }
    
    @media (max-width: 640px) {
      body {
        padding-left: calc(12px + env(safe-area-inset-left));
        padding-right: calc(12px + env(safe-area-inset-right));
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
      }
      .article-header h1 {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>
  <!-- HAMBURGER MENU -->
  <div class="hamburger-menu" id="hamburgerMenu">
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
  </div>

  <!-- MOBILE MENU -->
  <div class="mobile-menu" id="mobileMenu">
    <div class="menu-section">
      <div class="menu-title">Navigate</div>
      <a href="../index.html" class="menu-link">Home</a>
      <a href="index.html" class="menu-link">Potty Pal Blog</a>
      <a href="../index.html#how" class="menu-link">How It Works</a>
      <a href="../index.html#pricing" class="menu-link">Pricing</a>
      <a href="../index.html#faq" class="menu-link">FAQ</a>
    </div>
    
    <div class="menu-divider"></div>
    
    <div class="menu-section">
      <div class="menu-title">Legal</div>
      <a href="../privacy.html" class="menu-link" target="_blank">Privacy Policy</a>
      <a href="../terms.html" class="menu-link" target="_blank">Terms of Use</a>
    </div>
  </div>

  <div class="container">
    <div class="breadcrumb">
      <a href="../index.html">Home</a>
      <span>></span>
      <a href="index.html">Blog</a>
      <span>></span>
      <a href="category/common-problems.html">Common Problems</a>
      <span>></span>
      <span>Poop Withholding: Why It Happens and How to Break the Cycle</span>
    </div>

    <article class="article-header">
      <div class="article-meta">
        <a href="category/common-problems.html" class="article-category">Common Problems</a>
        <span class="article-date">ðŸ“… November 5, 2025</span>
      </div>
      <h1>Poop Withholding: Why It Happens and How to Break the Cycle</h1>
    </article>

    <img src="../images/blog/poop-withholding.png" alt="Compassionate parent sitting close to a toddler who looks uncomfortable, offering comfort and support in a warm bathroom setting with a potty chair nearby" class="featured-image" loading="lazy">

    <div class="article-content">
      <p>Your toddler is peeing on the potty like a champ. Then it comes time to poop, and... nothing. Days go by. Your child seems uncomfortable. You're worried. And the longer it goes, the more anxious everyone becomes.</p>

      <p>Welcome to poop withholdingâ€”one of the most common (and most stressful) problems parents face during potty training. The good news? It's fixable. But first, you need to understand what's actually happening and why the typical "just encourage them" approach often makes things worse.</p>

      <h2>What Is Poop Withholding? (And Why It's More Common Than You Think)</h2>

      <p>Poop withholding is exactly what it sounds like: your child deliberately holds in their stool, even when they have the urge to go. It's not laziness or defiance. It's a real behavioral response to fear, pain, or anxiety.</p>

      <p>Here's what makes it tricky: withholding often creates a vicious cycle. When a child holds in stool, it stays in the colon longer, and more water gets absorbed, making it harder and more painful to pass. So the next time they do poop, it hurts. That pain reinforces the fear, so they hold it again. And the cycle continues.</p>

      <h3>Why does this happen during potty training?</h3>

      <p>Common triggers include fear of the toilet, anxiety about using a new bathroom, a previous painful bowel movement, or simply not wanting to interrupt playtime. Some kids are just scared of the sensation or the flush. Others had one bad experience and now associate pooping with pain.</p>

      <p>The result? A child who can go days without pooping, becomes increasingly uncomfortable, and whose parents are increasingly stressed.</p>

      <div class="quick-tip">
        <strong>Quick Tip: This Isn't Your Fault</strong><br>
        Poop withholding isn't caused by poor parenting or pushing too hard. It's a normal (if frustrating) part of potty training for many kids. Understanding that will help you stay calmâ€”and calm parents help anxious kids.
      </div>

      <h2>The Painful Cycle: How Withholding Leads to Constipation</h2>

      <p>Here's why poop withholding is more than just an inconvenience:</p>

      <p><strong>Day 1-2:</strong> Your child holds in stool. You might not even notice yet.</p>

      <p><strong>Day 3-4:</strong> Stool accumulates in the colon. Your child might seem uncomfortable, have a distended belly, or complain of tummy pain.</p>

      <p><strong>Day 5+:</strong> When they finally do poop, it's large and hardâ€”and it hurts. A lot.</p>

      <p><strong>The aftermath:</strong> That painful experience confirms their fear. "Pooping on the potty hurts." So next time, they hold it again.</p>

      <p>If pooping is painful, children may avoid it, leading to larger, harder stools and even more pain the next time, reinforcing the fear and continuing the cycle.</p>

      <h3>The complications:</h3>

      <p>If withholding continues, it can lead to chronic constipation, accidental leakage (called encopresis), loss of bowel control, and significant distress for both child and parents. This is why addressing it early matters.</p>

      <h3>Signs Your Child Is Withholding</h3>
      <ul>
        <li>Passing large, hard stools or small hard pellets</li>
        <li>Abdominal discomfort or a "full" feeling</li>
        <li>Avoiding the potty, hiding to poop, or requesting a diaper to poop in</li>
        <li>Occasional soiling or leakage due to overflow around impacted stool</li>
        <li>Going 3+ days without a bowel movement</li>
        <li>Straining or seeming in pain when they do go</li>
      </ul>

      <p>If you see these signs, it's time to interveneâ€”not with pressure, but with strategy.</p>

      <h2>Strategy 1: Scheduled sits (with flexibility)</h2>
      <ul>
        <li>Try sits after wake, after meals, midâ€‘morning, midâ€‘afternoon, and before bed</li>
        <li>Keep them short: 3â€“5 minutes, pressureâ€‘free</li>
        <li>Track times and successes to spot patterns</li>
      </ul>
      <div class="pro-tip">
        <strong>Pro Tip:</strong> Post a simple visual schedule at your child's eye level.
      </div>

      <h2>Strategy 2: Smart clothing choices (no bottomless needed)</h2>
      <ul>
        <li>Elastic waistbands; skip snaps, zips, and overalls</li>
        <li>Consider daytime pull-ups as a bridge while you build skills</li>
        <li>Invite choice: "Which big-kid pants today?"</li>
      </ul>

      <h2>Strategy 3: Portable potty station</h2>
      <ul>
        <li>Child-size potty in the main living area</li>
        <li>Mini caddy: wipes, hand sanitizer, lidded trash, waterproof mat</li>
        <li>Make emptying part of the routine</li>
      </ul>

      <h2>Strategy 4: Accident-proof your space</h2>
      <ul>
        <li>Waterproof pads under the potty and favorite seats</li>
        <li>Keep enzyme cleaner, paper towels, spare clothes handy</li>
        <li>Treat accidents as data, not disasters</li>
      </ul>

      <h2>Strategy 5: Consistency across caregivers</h2>
      <ul>
        <li>Share a one-page plan: schedule, language, what works/doesn't</li>
        <li>Use the same phrases: "potty time," "try first, then play"</li>
      </ul>

      <h2>The challenge with all these strategies? Staying consistent</h2>
      <p>The methods workâ€”the hard part is remembering sits, logging accidents, and adjusting based on patterns when life is hectic in a small space.</p>

      <h2>Making It All Work: Your Potty Training Partner</h2>
      <p>The strategies above work. What makes the difference is having a system that keeps you consistent and adapts to your reality.</p>
      <ul>
        <li><strong>Real-time reminders for scheduled sits</strong> â€” never miss a potty time</li>
        <li><strong>Accident tracking that reveals patterns</strong> â€” adjust based on real data</li>
        <li><strong>Personalized guidance for small-space training</strong> â€” not generic tips</li>
        <li><strong>Shareable plans for caregivers</strong> â€” keep daycare and family aligned</li>
        <li><strong>24/7 support</strong> â€” instant answers when you're stuck</li>
      </ul>

      <div class="cta-section">
        <h3>Ready to Make Potty Training Easier?</h3>
        <p>Get personalized potty training guidance tailored to your child's unique needs with Potty Pal AI.</p>
        <a href="javascript:void(0)" class="cta-btn download-link">Start your free trial of PottyPalAI</a>
      </div>
    </div>

    <!-- Key Takeaways -->
    <div class="key-takeaways">
      <h2>Key Takeaways</h2>
      <ul>
        <li>Small spaces need adapted strategies, not different goals</li>
        <li>Consistency matters more than method</li>
        <li>Accidents are data to learn from</li>
        <li>Support and tracking make consistency doable</li>
      </ul>
    </div>

    <!-- Conclusion -->
    <section class="article-content">
      <p><strong>Conclusion:</strong> Start with one strategy this week and track what happens. Add another next week. If you want a system that keeps you on track and shows you what's working, start your free trial of PottyPalAI today.</p>
    </section>

    <div class="related-posts">
      <h2>Related Articles</h2>
      <div class="related-posts-grid" id="relatedPosts">
        <!-- Related posts will be dynamically inserted here -->
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div>
      <b>Potty Pal AI</b><br>
      Individual / Sole Proprietor
    </div>
    <div class="footer-links">
      <a href="../privacy.html" target="_blank" rel="noopener">Privacy Policy</a>
      <a href="../terms.html" target="_blank" rel="noopener">Terms of Use</a>
      <a href="../delete.html" target="_blank" rel="noopener">Data Deletion</a>
      <a href="mailto:support@pottypalai.com" target="_blank" rel="noopener">support@pottypalai.com</a>
    </div>
    <div class="footer-legal">
      &copy; 2025 Potty Pal AI. All rights reserved.
    </div>
    <div class="footer-disclaimer">
      Educational coaching, not medical advice.
    </div>
  </footer>

  <script>
    // Related posts data - update this section with related posts from the same category
    const relatedPosts = [
      // Example structure:
      // {
      //   title: "Related Post Title",
      //   slug: "related-post-slug",
      //   date: "2025-01-10",
      //   image: "related-image.jpg",  // Just filename - supports .jpg, .png, .webp, etc.
      //   imageAlt: "Alt text for related post image"
      // }
    ];

    // Format date
    function formatDate(dateString) {
      const date = new Date(dateString);
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }

    // Render related posts
    function renderRelatedPosts() {
      const grid = document.getElementById('relatedPosts');
      if (!grid || relatedPosts.length === 0) {
        if (grid) grid.style.display = 'none';
        return;
      }
      
      grid.innerHTML = relatedPosts.slice(0, 3).map(post => `
        <a href="${post.slug}.html" class="related-post-card">
          <img src="../images/blog/${post.image}" alt="${post.imageAlt}" class="related-post-image" loading="lazy">
          <div class="related-post-content">
            <h3>${post.title}</h3>
            <p class="related-post-date">${formatDate(post.date)}</p>
          </div>
        </a>
      `).join('');
    }

    // Smart download link function
    function getAppStoreLink() {
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      
      // Check for iOS devices
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
        return 'https://apps.apple.com/app/id6751612917';
      }
      
      // Check for Android devices
      if (/android/i.test(userAgent)) {
        return 'https://play.google.com/store/apps/details?id=com.pottypalai.app';
      }
      
      // Check for Windows Phone (legacy)
      if (/windows phone/i.test(userAgent)) {
        return 'https://play.google.com/store/apps/details?id=com.pottypalai.app';
      }
      
      // Default: return both links (we'll show both)
      return 'both';
    }
    
    // Handle download button clicks
    function handleDownloadClick(event) {
      event.preventDefault();
      const storeLink = getAppStoreLink();
      
      if (storeLink === 'both') {
        // Show both links or default to Google Play
        window.open('https://play.google.com/store/apps/details?id=com.pottypalai.app', '_blank');
      } else {
        window.open(storeLink, '_blank');
      }
    }

    // Hamburger Menu functionality
    document.addEventListener('DOMContentLoaded', function() {
      renderRelatedPosts();

      // Attach smart download links to all download buttons
      const downloadButtons = document.querySelectorAll('.download-link');
      downloadButtons.forEach(button => {
        button.addEventListener('click', handleDownloadClick);
      });

      const hamburgerMenu = document.getElementById('hamburgerMenu');
      const mobileMenu = document.getElementById('mobileMenu');
      const menuLinks = document.querySelectorAll('.mobile-menu .menu-link');

      hamburgerMenu.addEventListener('click', () => {
        hamburgerMenu.classList.toggle('active');
        mobileMenu.classList.toggle('active');
        
        if (mobileMenu.classList.contains('active')) {
          document.body.style.overflow = 'hidden';
        } else {
          document.body.style.overflow = '';
        }
      });

      menuLinks.forEach(link => {
        link.addEventListener('click', () => {
          hamburgerMenu.classList.remove('active');
          mobileMenu.classList.remove('active');
          document.body.style.overflow = '';
        });
      });

      mobileMenu.addEventListener('click', (e) => {
        if (e.target === mobileMenu) {
          hamburgerMenu.classList.remove('active');
          mobileMenu.classList.remove('active');
          document.body.style.overflow = '';
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
          hamburgerMenu.classList.remove('active');
          mobileMenu.classList.remove('active');
          document.body.style.overflow = '';
        }
      });
    });
  </script>
</body>
</html>
